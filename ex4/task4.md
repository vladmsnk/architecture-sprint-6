## Проектирование продажи ОСАГО

1) osago-aggregator представляет эндпоинт `POST /osago/apply`, который принимает данные по заявке и возвращает id заявки.
Сервис сохраняет заявку в соответсвующую таблицу, которая является одновременно очередью. 
2) При создании заявка попадает в очередь со статусом new. 
3) Отдельный процесс собирает заявки со статусом new и обращается в соотв сервисы osago для передачи
запроса на создание страховки, заявки переходят в статус processing. 
4) Далее другой процесс, которые представляет из себя worker pool,
проходится по заявкам со статусами processing и опрашивает сервисы osago для получения статуса по заявке.
5) Создается топик kafka, в который будут транслироваться результаты опросов по заявкам.  
6) По мере поступления ответов, формируются события, которые публикуются в топик Kafka.
7) Сервис core-app подписывается на эти события и транслирует их на FE с помощью паттерна Service Send Events
   (WebSocket будет вносить лишний overhead так как здесь не присутствует двунаправленное взаимодействие)
8) При опросе внешних API используем механизм ретраев с паузой. При получении успешного статуса, обновляем его в таблице.
9) Добавляем allerting для обнаружения частых неуспешных ответов от внешних API